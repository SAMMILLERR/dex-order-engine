generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Order {
  id             String    @id @default(uuid())
  status         String    @default("pending") // pending, routing, building, submitted, confirmed, failed
  tokenIn        String
  tokenOut       String
  amount         Float
  slippage       Float     @default(0.01)
  
  // DEX Routing fields
  dex            String?   // raydium or meteora
  selectedPrice  Float?
  amountOut      Float?
  
  // Execution fields
  txHash         String?   @unique
  executedPrice  Float?
  actualAmountOut Float?
  
  // Error handling
  error          String?
  attempts       Int       @default(0)
  
  // Timestamps
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  completedAt    DateTime?
  
  @@index([status])
  @@index([createdAt])
}
